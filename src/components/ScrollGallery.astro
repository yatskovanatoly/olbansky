---
const { images = [], title = 'Галерея' } = Astro.props
const hasImages = Array.isArray(images) && images.length > 0
---

<section aria-label={title}>
	{
		hasImages && (
			<div class='gallery__scroller' role='list'>
				{images.map((image) => (
					<a
						class='gallery__item'
						href={image.url}
						target='_blank'
						rel='noreferrer'
						role='listitem'
					>
						<img
							src={image.url}
							alt={image.alt ?? 'Изображение'}
							loading='lazy'
						/>
					</a>
				))}
			</div>
		)
	}
</section>

<style>
	.gallery__header h2 {
		margin: 0 0 0.35rem 0;
		font-size: clamp(1.4rem, 1.1rem + 1vw, 2rem);
		letter-spacing: 0.02em;
	}

	.gallery__header p {
		margin: 0 0 1.4rem 0;
		color: rgba(220, 220, 220, 0.72);
		font-size: 0.95rem;
	}

	.gallery__scroller {
		display: grid;
		grid-auto-flow: column;
		grid-auto-columns: minmax(200px, 30vw);
		gap: 1rem;
		overflow-x: auto;
		padding: 0.75rem 0;
		scroll-snap-type: x mandatory;
		scrollbar-width: thin;
		mask-image: linear-gradient(
			90deg,
			transparent 0%,
			#000 8%,
			#000 92%,
			transparent 100%
		);
	}

	.gallery__scroller::-webkit-scrollbar {
		height: 6px;
	}

	.gallery__scroller::-webkit-scrollbar-thumb {
		background: rgba(255, 255, 255, 0.25);
		border-radius: 999px;
	}

	.gallery__item {
		display: block;
		position: relative;
		border-radius: 14px;
		overflow: hidden;
		border: 1px solid rgba(255, 255, 255, 0.15);
		background: rgba(255, 255, 255, 0.06);
		scroll-snap-align: start;
		transition:
			transform 180ms ease,
			box-shadow 180ms ease;
	}

	.gallery__item:hover {
		transform: translateY(-4px) scale(1.01);
		box-shadow: 0 12px 25px rgba(0, 0, 0, 0.35);
	}

	.gallery__item img {
		display: block;
		width: 100%;
		height: 100%;
		aspect-ratio: 1 / 1;
		object-fit: cover;
	}

	.gallery__empty {
		margin: 0;
		color: rgba(220, 220, 220, 0.7);
	}

	@media (max-width: 720px) {
		.gallery {
			margin: 2rem 0;
			padding: 1.25rem 1rem;
		}

		.gallery__scroller {
			grid-auto-columns: minmax(180px, 75vw);
		}
	}
</style>
